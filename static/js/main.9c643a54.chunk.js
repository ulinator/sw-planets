(this["webpackJsonpsw-planets"]=this["webpackJsonpsw-planets"]||[]).push([[0],[,,,function(e,t,a){e.exports={sortArrows:"PlanetsData_sortArrows__1zvKd",grid:"PlanetsData_grid__1LqjE",planetsDataTable:"PlanetsData_planetsDataTable__wyX_B",planetName:"PlanetsData_planetName__3ZZcx",planetsDataSimple:"PlanetsData_planetsDataSimple__1-uOi"}},,,,,,,function(e,t,a){e.exports={formWrapper:"AddMovie_formWrapper__2hQa_",button:"AddMovie_button__1QhSv",formLabel:"AddMovie_formLabel__3mIC0",planetTags:"AddMovie_planetTags__2x0QZ",input:"AddMovie_input__3HEwk",validateInfo:"AddMovie_validateInfo__BrrWv"}},function(e,t,a){e.exports={expandedSection:"ExpandableTab_expandedSection__9WzC0",title:"ExpandableTab_title__zJwmd",toggleImage:"ExpandableTab_toggleImage__245Ee",expandableTab:"ExpandableTab_expandableTab__Pfadp",expanded:"ExpandableTab_expanded__1CUgK",expandableHeader:"ExpandableTab_expandableHeader__2HOcx"}},,,function(e,t,a){e.exports={planetTag:"PlanetTag_planetTag__2ZkgH",closeButton:"PlanetTag_closeButton__3vX1M"}},,,function(e,t,a){e.exports=a.p+"static/media/LOGO.79977f05.svg"},function(e,t,a){e.exports={moviesList:"MoviesList_moviesList__2gALa"}},function(e,t,a){e.exports=a.p+"static/media/LOADER.8bbd21d3.svg"},function(e,t,a){e.exports={loader:"Loader_loader__2AuLb","rotate-loader":"Loader_rotate-loader__zm1J7"}},function(e,t,a){e.exports=a.p+"static/media/ARROW_OPEN.da45c4c0.svg"},function(e,t,a){e.exports=a.p+"static/media/ARROW_CLOSE.81e948ad.svg"},function(e,t,a){e.exports=a.p+"static/media/CLOSE.4b823e92.svg"},,function(e,t,a){e.exports=a(36)},,,,,function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(16),c=a.n(l),o=(a(30),a(4)),s=a(6),i=a(7),u=a(8),m=a(9),d=(a(31),a(17)),p=a.n(d);var f=function(){return r.a.createElement("figure",null,r.a.createElement("img",{src:p.a,alt:"Front-end recruitment task"}))},v=a(1),h=a.n(v),E=a(5),b=a(18),g=a.n(b),_=a(19),w=a.n(_),x=a(20),O=a.n(x);var N=function(){return r.a.createElement("figure",null,r.a.createElement("img",{className:O.a.loader,src:w.a,alt:"Loading..."}))},S=function(e){return fetch(e).then((function(e){return e.json()})).then((function(e){return e}))},k="https://swapi.dev/api/",y=function(){var e=Object(E.a)(h.a.mark((function e(){var t;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(k+"films/");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(E.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S(k+"planets/?search=".concat(t));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";return function(a,n){if(!a.hasOwnProperty(e)||!n.hasOwnProperty(e))return 0;var r=isNaN(a[e])?a[e]:parseInt(a[e]),l=isNaN(n[e])?n[e]:parseInt(n[e]),c=0;return r>l?c=1:r<l&&(c=-1),"desc"===t?-1*c:c}},D=function(e){var t=!!/[A-Z]/.test(e[0]),a=e.length>2;return t&&a},P=function(e){return e.length>0},T=a(3),M=a.n(T),C="asc",L="desc",V=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={planetsData:null,sortedData:null,sortingOrder:C,loading:!0,isDesktop:!1},e.fetchMoviePlanetsData=Object(E.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.planets,e.setState({loading:!0}),t.next=4,Promise.all(a.map(function(){var e=Object(E.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.match("^http://")&&(t=t.replace("http://","https://")),e.next=3,S(t);case 3:return a=e.sent,e.abrupt("return",a);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 4:n=t.sent,e.setState({planetsData:n,loading:!1});case 6:case"end":return t.stop()}}),t)}))),e.sortData=function(t){e.setState((function(e){return{sortedData:Object(o.a)(e.sortedData).sort(j(t,e.sortingOrder)),sortingOrder:e.sortingOrder===C?L:C}}))},e.toggleSortingOrder=function(){e.setState((function(e){return{sortingOrder:e.sortingOrder===C?L:C}}))},e.checkWidthAndSwitchView=function(){var t=!!window.matchMedia("(min-width: 600px)").matches;e.setState({isDesktop:t})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(E.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return window.addEventListener("resize",this.checkWidthAndSwitchView),this.checkWidthAndSwitchView(),e.next=4,this.fetchMoviePlanetsData();case 4:this.setState((function(e){return{sortedData:Object(o.a)(e.planetsData)}}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.checkWidthAndSwitchView)}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.sortedData,l=e.isDesktop,c=this.sortData;if(t)return r.a.createElement(N,null);var o=a&&a.map((function(e){return r.a.createElement("table",{className:M.a.planetsDataSimple,key:e.url},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Planet Name"),r.a.createElement("td",{className:M.a.planetName},e.name)),r.a.createElement("tr",null,r.a.createElement("th",null,"Rotation period"),r.a.createElement("td",null,e.rotation_period)),r.a.createElement("tr",null,r.a.createElement("th",null,"Orbital period"),r.a.createElement("td",null,e.orbital_period)),r.a.createElement("tr",null,r.a.createElement("th",null,"Diameter"),r.a.createElement("td",null,e.diameter)),r.a.createElement("tr",null,r.a.createElement("th",null,"Climate"),r.a.createElement("td",null,e.climate)),r.a.createElement("tr",null,r.a.createElement("th",null,"Surface water"),r.a.createElement("td",null,e.surface_water)),r.a.createElement("tr",null,r.a.createElement("th",null,"Population"),r.a.createElement("td",null,e.population))))})),s=r.a.createElement("table",{className:M.a.planetsDataTable},r.a.createElement("thead",null,r.a.createElement("tr",{className:M.a.grid},r.a.createElement("th",{className:M.a.planetName,onClick:function(){return c("name")}},"Planet Name",r.a.createElement("span",{className:M.a.sortArrows})),r.a.createElement("th",{onClick:function(){return c("rotation_period")}},"Rotation period",r.a.createElement("span",{className:M.a.sortArrows})),r.a.createElement("th",{onClick:function(){return c("orbital_period")}},"Orbital period",r.a.createElement("span",{className:M.a.sortArrows})),r.a.createElement("th",{onClick:function(){return c("diameter")}},"Diameter",r.a.createElement("span",{className:M.a.sortArrows})),r.a.createElement("th",{onClick:function(){return c("climate")}},"Climate",r.a.createElement("span",{className:M.a.sortArrows})),r.a.createElement("th",{onClick:function(){return c("surface_water")}},"Surface water",r.a.createElement("span",{className:M.a.sortArrows})),r.a.createElement("th",{onClick:function(){return c("population")}},"Population",r.a.createElement("span",{className:M.a.sortArrows})))),r.a.createElement("tbody",null,a&&a.map((function(e){return r.a.createElement("tr",{key:e.url,className:M.a.grid},r.a.createElement("td",{className:M.a.planetName},e.name),r.a.createElement("td",null,e.rotation_period),r.a.createElement("td",null,e.orbital_period),r.a.createElement("td",null,e.diameter),r.a.createElement("td",null,e.climate),r.a.createElement("td",null,e.surface_water),r.a.createElement("td",null,e.population))}))));return r.a.createElement(n.Fragment,null,l?s:o)}}]),a}(n.Component),W=a(21),I=a.n(W),R=a(22),B=a.n(R),Q=a(11),z=a.n(Q),H=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={isExpanded:!1},e.toggleExpanded=function(){e.setState((function(e){return{isExpanded:!e.isExpanded}}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.isExpanded,t=e?B.a:I.a;return r.a.createElement("div",{className:"".concat(z.a.expandableTab," ").concat(e?z.a.expanded:"")},r.a.createElement("div",{className:z.a.expandableHeader,onClick:this.toggleExpanded},r.a.createElement("h2",{className:z.a.title},this.props.title),r.a.createElement("img",{className:z.a.toggleImage,src:t,alt:"Toggle expanded"})),e&&r.a.createElement("section",{className:z.a.expandedSection},this.props.children))}}]),a}(n.Component),J=r.a.createContext({movies:[],addMovie:function(){}}),Z=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={films:null,error:null},e.getMovies=Object(E.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y().catch((function(t){e.setState({error:t})}));case 2:a=t.sent,e.setState({films:a.results});case 4:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(E.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMovies();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.films,a=e.error;return r.a.createElement("section",{className:g.a.MoviesList},a&&r.a.createElement("p",{className:"error"},"Error: ",a),!t&&r.a.createElement(N,null),r.a.createElement(J.Consumer,null,(function(e){return t&&t.concat(e.movies).map((function(e){return r.a.createElement(H,{key:e.title,title:e.title},r.a.createElement(V,{planets:e.planets}))}))})))}}]),a}(n.Component),F=a(24),K=a(23),U=a.n(K),X=a(14),q=a.n(X);var G=function(e){return r.a.createElement("div",{className:q.a.planetTag},r.a.createElement("p",null,e.children),r.a.createElement("button",{type:"button",className:q.a.closeButton,onClick:e.remove},r.a.createElement("img",{src:U.a,alt:"close"})))},$=a(10),Y=a.n($),ee=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={movieTitle:"",searchQuery:"",selectedPlanets:[],searchResults:null,titleValidated:!0,planetValidated:!0},e.handleTitleChange=function(t){var a=t.target.value;e.setState({movieTitle:a,titleValidated:D(a)})},e.handlePlanetAdd=function(t,a){var n=a.name;e.state.selectedPlanets.find((function(e){return e.name===n}))||e.setState((function(e){var a=[].concat(Object(o.a)(e.selectedPlanets),[{name:n,value:t}]);return{selectedPlanets:a,searchQuery:"",planetValidated:P(a)}}))},e.handleSearchValue=function(t){e.setState({searchQuery:t.target.value})},e.handleSubmit=function(t){var a=e.state,n=a.movieTitle,r=a.selectedPlanets,l=D(n),c=P(r);if(l||e.setState({titleValidated:!1}),c||e.setState({planetValidated:!1}),l&&c){var o={title:n,planets:r.map((function(e){return e.value}))};t.addMovie(o),e.setState({movieTitle:"",selectedPlanets:[]})}},e.getOptions=Object(E.a)(h.a.mark((function t(){var a,n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.state.searchQuery,t.next=3,A(a);case 3:n=t.sent,e.setState({searchResults:n});case 5:case"end":return t.stop()}}),t)}))),e.removeTag=function(t){e.setState((function(e){var a=e.selectedPlanets.filter((function(e){return e.name!==t}));return{selectedPlanets:a,planetsValidated:P(a)}}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.selectedPlanets,n=t.movieTitle,l=t.planetValidated,c=t.titleValidated,o=this.handleTitleChange,s=this.handleSubmit,i=this.handlePlanetAdd,u=a.map((function(t){return r.a.createElement(G,{key:t.name,remove:function(){return e.removeTag(t.name)}},t.name)}));return r.a.createElement(H,{title:"Add Movie"},r.a.createElement("form",{className:Y.a.formWrapper},r.a.createElement("label",{className:Y.a.formLabel},"Movie title:",r.a.createElement("input",{name:"title",className:Y.a.input,type:"text",placeholder:"Enter the movie title",value:n,onChange:o})),!c&&r.a.createElement("p",{className:Y.a.validateInfo},"The title must start with a capital letter and be at least 3 letters long."),u&&r.a.createElement("div",{className:Y.a.planetTags},u),r.a.createElement("label",{className:Y.a.formLabel},"Add planet:",r.a.createElement(F.a,{onChange:i,options:[],getOptions:function(e){return new Promise((function(t,a){A(e).then((function(e){t(e.results.map((function(e){return{value:e.url,name:e.name}})))}))}))},value:[],search:!0,placeholder:"Search for the the planet in database",printOptions:"always"})),!l&&r.a.createElement("p",{className:Y.a.validateInfo},"Add at least one planet."),r.a.createElement(J.Consumer,null,(function(e){return r.a.createElement("button",{className:Y.a.button,type:"button",disabled:!(c&&l),onClick:function(){return s(e)}},"Add Movie")}))))}}]),a}(n.Component),te=function(e){Object(m.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(s.a)(this,a);for(var n=arguments.length,r=new Array(n),l=0;l<n;l++)r[l]=arguments[l];return(e=t.call.apply(t,[this].concat(r))).state={movies:[]},e.addMovie=function(t){e.setState((function(e){var a=[].concat(Object(o.a)(e.movies),[t]);return localStorage.setItem("userSavedMovies",JSON.stringify(a)),{movies:a}}))},e.getMoviesFromLocalStorage=function(){var t=localStorage.getItem("userSavedMovies"),a=JSON.parse(t);a&&e.setState({movies:a})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getMoviesFromLocalStorage()}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(J.Provider,{value:{movies:this.state.movies,addMovie:this.addMovie}},r.a.createElement("div",{className:"app-wrapper top"},r.a.createElement(f,null),r.a.createElement(Z,null)),r.a.createElement("div",{className:"app-wrapper bottom"},r.a.createElement(ee,null))))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[25,1,2]]]);
//# sourceMappingURL=main.9c643a54.chunk.js.map